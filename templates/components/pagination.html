<!-- Componente de paginación reutilizable -->
{% if pagination.pages > 1 %}
<nav aria-label="Navegación de páginas" class="d-flex justify-content-between align-items-center mt-4">
    <!-- Información de resultados -->
    <div class="pagination-info">
        <small class="text-muted">
            Mostrando {{ ((pagination.page - 1) * pagination.per_page) + 1 }} - 
            {{ min(pagination.page * pagination.per_page, pagination.total) }} 
            de {{ pagination.total }} resultados
        </small>
    </div>
    
    <!-- Controles de paginación -->
    <div class="pagination-controls">
        <ul class="pagination pagination-sm mb-0">
            <!-- Primera página -->
            {% if pagination.page > 1 %}
                <li class="page-item">
                    <a class="page-link" href="{{ first_url }}" title="Primera página">
                        <i class="bi bi-chevron-double-left"></i>
                    </a>
                </li>
            {% endif %}
            
            <!-- Página anterior -->
            {% if pagination.has_prev %}
                <li class="page-item">
                    <a class="page-link" href="{{ prev_url }}" title="Página anterior">
                        <i class="bi bi-chevron-left"></i>
                    </a>
                </li>
            {% endif %}
            
            <!-- Números de página -->
            {% for page_num in page_range %}
                {% if page_num == pagination.page %}
                    <li class="page-item active">
                        <span class="page-link">{{ page_num }}</span>
                    </li>
                {% else %}
                    <li class="page-item">
                        <a class="page-link" href="{{ page_urls[page_num] }}">{{ page_num }}</a>
                    </li>
                {% endif %}
            {% endfor %}
            
            <!-- Página siguiente -->
            {% if pagination.has_next %}
                <li class="page-item">
                    <a class="page-link" href="{{ next_url }}" title="Página siguiente">
                        <i class="bi bi-chevron-right"></i>
                    </a>
                </li>
            {% endif %}
            
            <!-- Última página -->
            {% if pagination.page < pagination.pages %}
                <li class="page-item">
                    <a class="page-link" href="{{ last_url }}" title="Última página">
                        <i class="bi bi-chevron-double-right"></i>
                    </a>
                </li>
            {% endif %}
        </ul>
    </div>
    
    <!-- Selector de elementos por página -->
    <div class="per-page-selector">
        <div class="d-flex align-items-center">
            <small class="text-muted me-2">Por página:</small>
            <select class="form-select form-select-sm" style="width: auto;" onchange="changePerPage(this.value)">
                {% for option in [10, 20, 50, 100] %}
                    <option value="{{ option }}" {% if option == pagination.per_page %}selected{% endif %}>
                        {{ option }}
                    </option>
                {% endfor %}
            </select>
        </div>
    </div>
</nav>

<script>
function changePerPage(perPage) {
    const url = new URL(window.location);
    url.searchParams.set('per_page', perPage);
    url.searchParams.set('page', '1'); // Resetear a primera página
    window.location.href = url.toString();
}
</script>

<style>
.pagination-info {
    flex: 1;
}

.pagination-controls {
    flex: 2;
    display: flex;
    justify-content: center;
}

.per-page-selector {
    flex: 1;
    display: flex;
    justify-content: flex-end;
}

@media (max-width: 768px) {
    .pagination-info,
    .per-page-selector {
        display: none;
    }
    
    .pagination-controls {
        flex: 1;
    }
}

.page-link {
    color: #007bff;
    border-color: #dee2e6;
}

.page-link:hover {
    color: #0056b3;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

.page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

.page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}
</style>
{% endif %}